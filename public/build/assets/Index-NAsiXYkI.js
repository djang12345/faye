import{r as g,c as a,a as s,u as l,w as u,F as m,o,Z as j,b as t,d as x,v as y,e as p,f as A,g as f,Q as S,t as r,i as C,h}from"./app-DSbO2B8p.js";import{P as B}from"./Pagination-DBAlykLF.js";import{f as N,a as k}from"./functions-DzHC9xVL.js";import{A as T}from"./AuthenticatedLayout-C2NJg4lw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"container-fluid p-2"},R={class:"d-flex justify-content-end"},V={class:"input-group flex-nowrap",style:{width:"300px"}},I={class:"table"},P={key:0,scope:"col"},D={key:0},E={scope:"row"},L={key:0},$={class:"btn-group",role:"group"},F=["onClick"],Y={class:"d-flex justify-content-end"},Z={__name:"Index",props:{applicants:{type:Array}},setup(c){const d=g(""),w=()=>{f.visit(route(S().props.routeName),{method:"get",data:{search:d.value},preserveState:!0,preserveScroll:!0})},v=i=>{Swal.fire({title:"Reject After Interview?",text:"This will reject the applicant after their interview and send them a polite rejection email. Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, reject",cancelButtonText:"Cancel",input:"textarea",inputLabel:"Rejection Reason",inputPlaceholder:"Please provide a polite reason for rejection...",inputValidator:e=>{if(!e)return"You need to provide a rejection reason!";if(e.length>500)return"Rejection reason must be 500 characters or less!"}}).then(e=>{e.isConfirmed&&(Swal.fire({title:"Processing...",text:"Sending rejection email...",showConfirmButton:!1,willOpen:()=>{Swal.showLoading()}}),f.post(route("applicant.reject-after-interview",i),{rejection_reason:e.value},{onSuccess:()=>{Swal.fire({icon:"success",title:"Applicant Rejected",text:"The applicant has been rejected and a polite rejection email has been sent.",timer:2e3,showConfirmButton:!1})},onError:n=>{Swal.fire({icon:"error",title:"Error",text:n.rejection_reason||"There was an error processing the request."})}}))})};return(i,e)=>(o(),a(m,null,[s(l(j),{title:"Applicants"}),s(T,null,{default:u(()=>[t("div",_,[e[8]||(e[8]=t("div",{class:"mb-5"},"Applicants",-1)),t("div",R,[t("div",V,[x(t("input",{onKeyup:w,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),ref:"input",type:"text",class:"form-control",placeholder:"Search","aria-label":"Search","aria-describedby":"addon-wrapping"},null,544),[[y,d.value]]),e[1]||(e[1]=t("button",{type:"button",class:"input-group-text",id:"addon-wrapping"},[t("i",{class:"bx bx-search-alt-2"})],-1))])]),t("table",I,[t("thead",null,[t("tr",null,[e[2]||(e[2]=t("th",{scope:"col"},"#",-1)),e[3]||(e[3]=t("th",{scope:"col"},"Name",-1)),e[4]||(e[4]=t("th",{scope:"col"},"Email",-1)),i.$page.props.routeName.includes("applicant.accepted")?(o(),a("th",P," Interview ")):p("",!0),e[5]||(e[5]=t("th",{scope:"col"},"Actions",-1))])]),t("tbody",null,[c.applicants.data==[]?(o(),a("div",D," No applicants found in this page ")):p("",!0),(o(!0),a(m,null,A(c.applicants.data,(n,b)=>(o(),a("tr",null,[t("th",E,r(b+1),1),t("td",null,r(n.applicant.lastname)+", "+r(n.applicant.firstname)+" "+r(n.applicant.middlename),1),t("td",null,r(n.applicant.email),1),i.$page.props.routeName.includes("applicant.accepted")?(o(),a("td",L,r(l(N)(n.interview_date))+" at "+r(l(k)(n.interview_time)),1)):p("",!0),t("td",null,[t("div",$,[s(l(C),{href:i.route("applicant.view",n.applicant.id),class:"btn btn-primary btn-sm"},{default:u(()=>e[6]||(e[6]=[h(" View ")])),_:2},1032,["href"]),i.$page.props.routeName.includes("applicant.accepted")?(o(),a("button",{key:0,onClick:q=>v(n.applicant.id),class:"btn btn-danger btn-sm",title:"Reject After Interview"},e[7]||(e[7]=[t("i",{class:"bx bx-x"},null,-1),h(" Reject ")]),8,F)):p("",!0)])])]))),256))])]),t("div",Y,[s(B,{paginate:c.applicants},null,8,["paginate"])])])]),_:1})],64))}};export{Z as default};
