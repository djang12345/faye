import{T as A,n as _,A as D,j as C,w as h,o as i,b as e,a as w,h as x,u as a,i as R,k as V,c as n,t as l,e as c,d as b,x as L,f as B,F as E,l as g}from"./app-DSbO2B8p.js";import{A as T}from"./AuthenticatedLayout-C2NJg4lw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"container-fluid p-2"},N={class:"row g-4"},S={class:"col-md-12"},U={class:"card shadow-sm border-0"},j={class:"card-header bg-white"},F={class:"d-flex justify-content-between align-items-center"},Y={class:"card-body"},I={key:0,class:"row mb-3"},O={class:"col-md-6"},P={class:"p-3 bg-light rounded"},z={class:"small"},G={class:"text-muted"},H={class:"row"},J={class:"col-md-6"},K={class:"mb-3"},Q=["value"],W={key:0,class:"text-danger small mt-1"},X={class:"col-md-6"},Z={class:"mb-3"},$={class:"p-3 bg-light rounded"},ee={class:"badge bg-secondary"},se={class:"row"},te={class:"col-md-6"},ae={class:"mb-3"},de={key:0,class:"text-danger small mt-1"},le={class:"col-md-6"},oe={class:"mb-3"},ie={key:0,class:"text-danger small mt-1"},ne={class:"mb-3"},re={key:0,class:"text-danger small mt-1"},ue={key:1,class:"mb-4 p-3 bg-info bg-opacity-10 rounded"},ce={class:"row"},ve={class:"col-md-4"},me={class:"card border-info"},_e={class:"card-body p-2"},be={class:"h5 mb-0 text-info"},fe={class:"col-md-4"},ye={class:"card border-success"},pe={class:"card-body p-2"},he={class:"h5 mb-0 text-success"},xe={class:"col-md-4"},ge={class:"card border-warning"},qe={class:"card-body p-2"},we={class:"h5 mb-0 text-warning"},Re={key:0,class:"mt-3 text-danger small"},ke={class:"d-flex justify-content-end gap-2"},Ae=["disabled"],Le={__name:"Edit",props:{leaveRequest:Object,leaveRules:Array,isAdmin:Boolean},setup(r){const u=r,t=A({leave_type:u.leaveRequest.leave_type,start_date:u.leaveRequest.start_date,end_date:u.leaveRequest.end_date,details:u.leaveRequest.details}),v=_(()=>u.leaveRules.find(o=>o.leave_type===t.leave_type)),f=_(()=>{if(!t.start_date||!t.end_date)return 0;const o=new Date(t.start_date),s=new Date(t.end_date),m=Math.abs(s-o);return Math.ceil(m/(1e3*60*60*24))+1}),q=_(()=>v.value?v.value.default_credits:0),y=_(()=>q.value>=f.value);D([()=>t.start_date,()=>t.end_date],()=>{});const k=()=>{if(!y.value){alert("You don't have enough credits for this request.");return}const o=u.isAdmin?"admin.leave.update":"leave.update";t.put(route(o,u.leaveRequest.id))};return(o,s)=>(i(),C(T,null,{default:h(()=>{var m,p;return[e("div",M,[e("div",N,[e("div",S,[e("div",U,[e("div",j,[e("div",F,[s[5]||(s[5]=e("h5",{class:"mb-0"},"Edit Leave Request",-1)),w(a(R),{href:r.isAdmin?o.route("admin.leave.index"):o.route("leave.index"),class:"btn btn-outline-secondary btn-sm"},{default:h(()=>s[4]||(s[4]=[e("i",{class:"bx bx-arrow-back me-1"},null,-1),x("Back to Leave Requests ")])),_:1},8,["href"])])]),e("div",Y,[e("form",{onSubmit:V(k,["prevent"])},[r.isAdmin?(i(),n("div",I,[e("div",O,[s[6]||(s[6]=e("label",{class:"form-label"},"Employee",-1)),e("div",P,[e("div",z,[e("strong",null,l((m=r.leaveRequest.user)==null?void 0:m.name),1),e("div",G,l((p=r.leaveRequest.user)==null?void 0:p.email),1)])])])])):c("",!0),e("div",H,[e("div",J,[e("div",K,[s[8]||(s[8]=e("label",{class:"form-label"},"Leave Type",-1)),b(e("select",{"onUpdate:modelValue":s[0]||(s[0]=d=>a(t).leave_type=d),class:"form-control",required:""},[s[7]||(s[7]=e("option",{value:""},"Select leave type",-1)),(i(!0),n(E,null,B(r.leaveRules,d=>(i(),n("option",{key:d.leave_type,value:d.leave_type},l(d.display_name),9,Q))),128))],512),[[L,a(t).leave_type]]),a(t).errors.leave_type?(i(),n("div",W,l(a(t).errors.leave_type),1)):c("",!0)])]),e("div",X,[e("div",Z,[s[9]||(s[9]=e("label",{class:"form-label"},"Days Requested",-1)),e("div",$,[e("span",ee,l(f.value)+" days",1)])])])]),e("div",se,[e("div",te,[e("div",ae,[s[10]||(s[10]=e("label",{class:"form-label"},"Start Date",-1)),b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>a(t).start_date=d),type:"date",class:"form-control",required:""},null,512),[[g,a(t).start_date]]),a(t).errors.start_date?(i(),n("div",de,l(a(t).errors.start_date),1)):c("",!0)])]),e("div",le,[e("div",oe,[s[11]||(s[11]=e("label",{class:"form-label"},"End Date",-1)),b(e("input",{"onUpdate:modelValue":s[2]||(s[2]=d=>a(t).end_date=d),type:"date",class:"form-control",required:""},null,512),[[g,a(t).end_date]]),a(t).errors.end_date?(i(),n("div",ie,l(a(t).errors.end_date),1)):c("",!0)])])]),e("div",ne,[s[12]||(s[12]=e("label",{class:"form-label"},"Request Details",-1)),b(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=d=>a(t).details=d),rows:"4",class:"form-control",placeholder:"Please provide detailed reason for the leave request...",required:""},null,512),[[g,a(t).details]]),a(t).errors.details?(i(),n("div",re,l(a(t).errors.details),1)):c("",!0)]),v.value?(i(),n("div",ue,[s[16]||(s[16]=e("h6",{class:"text-info mb-3"},"Credit Information",-1)),e("div",ce,[e("div",ve,[e("div",me,[e("div",_e,[s[13]||(s[13]=e("div",{class:"small text-muted"},"Total Credits",-1)),e("div",be,l(v.value.default_credits),1)])])]),e("div",fe,[e("div",ye,[e("div",pe,[s[14]||(s[14]=e("div",{class:"small text-muted"},"Available Credits",-1)),e("div",he,l(q.value),1)])])]),e("div",xe,[e("div",ge,[e("div",qe,[s[15]||(s[15]=e("div",{class:"small text-muted"},"Requesting",-1)),e("div",we,l(f.value)+" days",1)])])])]),y.value?c("",!0):(i(),n("div",Re," ⚠️ You don't have enough credits for this request. "))])):c("",!0),e("div",ke,[w(a(R),{href:r.isAdmin?o.route("admin.leave.index"):o.route("leave.index"),class:"btn btn-secondary"},{default:h(()=>s[17]||(s[17]=[e("i",{class:"bx bx-x me-1"},null,-1),x("Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:!y.value,class:"btn btn-primary"},s[18]||(s[18]=[e("i",{class:"bx bx-save me-1"},null,-1),x("Update Leave Request ")]),8,Ae)])],32)])])])])])]}),_:1}))}};export{Le as default};
