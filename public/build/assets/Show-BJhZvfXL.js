import{r as A,p as V,j as T,w as m,o,b as s,a as j,h as d,u as D,i as L,c as i,e as n,t as a,s as b,k as P,d as U,l as z,g as S}from"./app-DSbO2B8p.js";import{A as F}from"./AuthenticatedLayout-C2NJg4lw.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"container-fluid p-4"},G={class:"row"},H={class:"col-12"},J={class:"d-flex justify-content-between align-items-center mb-4"},K={"aria-label":"breadcrumb"},W={class:"breadcrumb mb-0"},X={class:"breadcrumb-item"},Y={class:"d-flex gap-2"},Z={class:"row"},$={class:"col-lg-8"},ss={class:"card shadow-sm border-0 mb-4"},es={class:"card-body"},ts={class:"row"},as={class:"col-md-6"},ds={class:"d-flex align-items-center mb-3"},ls={class:"mb-1"},os={class:"text-muted"},is={class:"col-md-6"},ns={class:"text-end"},cs={class:"card shadow-sm border-0 mb-4"},rs={class:"card-body"},ms={class:"row"},bs={class:"col-md-6"},us={class:"mb-3"},vs={class:"p-3 bg-light rounded"},xs={class:"badge bg-info fs-6"},hs={class:"col-md-6"},gs={class:"mb-3"},ps={class:"p-3 bg-light rounded"},_s={class:"fs-5 fw-bold text-primary"},ys={class:"row"},fs={class:"col-md-6"},ws={class:"mb-3"},Rs={class:"p-3 bg-light rounded"},qs={class:"col-md-6"},ks={class:"mb-3"},As={class:"p-3 bg-light rounded"},js={class:"mb-3"},Ds={class:"p-4 bg-light rounded"},Ls={class:"mb-0"},Ss={key:0,class:"card shadow-sm border-0 mb-4"},Cs={class:"card-body"},Ms={class:"p-3 bg-warning bg-opacity-10 rounded"},Bs={class:"mb-0"},Es={class:"col-lg-4"},Is={class:"card shadow-sm border-0 mb-4"},Ns={class:"card-body"},Vs={class:"timeline"},Ts={class:"timeline-item"},Ps={class:"timeline-content"},Us={class:"text-muted"},zs={key:0,class:"timeline-item"},Fs={class:"timeline-content"},Os={class:"mb-1"},Qs={class:"text-muted"},Gs={key:0,class:"mt-1"},Hs={class:"text-muted"},Js={key:0,class:"card shadow-sm border-0"},Ks={key:1,class:"card shadow-sm border-0 mt-4"},Ws={class:"card-body"},Xs={class:"row text-center"},Ys={class:"col-4"},Zs={class:"border-end"},$s={class:"text-primary mb-1"},se={class:"col-4"},ee={class:"border-end"},te={class:"text-warning mb-1"},ae={class:"col-4"},de={class:"text-danger mb-1"},le={key:2,class:"card shadow-sm border-0 mt-4"},oe={class:"card-body"},ie={class:"row"},ne={class:"col-md-4 text-center"},ce={class:"p-3 bg-light rounded"},re={class:"text-primary mb-0"},me={class:"col-md-4 text-center"},be={class:"p-3 bg-light rounded"},ue={class:"text-primary mb-0"},ve={class:"col-md-4 text-center"},xe={class:"p-3 bg-light rounded"},he={class:"text-primary mb-0"},ge={class:"modal fade",id:"approveModal",tabindex:"-1",ref:"approveModal"},pe={class:"modal-dialog"},_e={class:"modal-content"},ye={class:"modal-header"},fe={class:"modal-title"},we={class:"modal-body"},Re={class:"mb-3"},qe=["placeholder"],ke={class:"d-flex justify-content-end gap-2"},Ae={__name:"Show",props:{leaveRequest:Object,isAdmin:Boolean},setup(t){const C=t,c=A("approve"),r=A(""),u=()=>{c.value="approve",new bootstrap.Modal(document.getElementById("approveModal")).show()},v=()=>{c.value="reject",new bootstrap.Modal(document.getElementById("approveModal")).show()},M=()=>{S.patch(route("leave.approve",C.leaveRequest.id),{status:c.value,admin_notes:r.value},{onSuccess:()=>{bootstrap.Modal.getInstance(document.getElementById("approveModal")).hide(),r.value="",S.visit(route("leave.index"))}})},B=l=>{const e={pending:"badge bg-warning",approved:"badge bg-success",rejected:"badge bg-danger"};return e[l]||e.pending},E=l=>l.charAt(0).toUpperCase()+l.slice(1),x=l=>new Date(l).toLocaleDateString(),h=l=>new Date(l).toLocaleString(),I=()=>{window.print()};return V(()=>{}),(l,e)=>(o(),T(F,null,{default:m(()=>{var g,p,_,y,f,w,R,q,k;return[s("div",Q,[s("div",G,[s("div",H,[s("div",J,[s("div",null,[e[3]||(e[3]=s("h2",{class:"mb-1"},"Leave Request Details",-1)),s("nav",K,[s("ol",W,[s("li",X,[j(D(L),{href:l.route("leave.index"),class:"text-decoration-none"},{default:m(()=>e[1]||(e[1]=[d("Leave Requests")])),_:1},8,["href"])]),e[2]||(e[2]=s("li",{class:"breadcrumb-item active","aria-current":"page"},"View Details",-1))])])]),s("div",Y,[j(D(L),{href:l.route("leave.index"),class:"btn btn-outline-secondary"},{default:m(()=>e[4]||(e[4]=[s("i",{class:"bx bx-arrow-back me-1"},null,-1),d("Back to List ")])),_:1},8,["href"]),s("button",{class:"btn btn-outline-primary",onClick:I},e[5]||(e[5]=[s("i",{class:"bx bx-printer me-1"},null,-1),d("Print ")])),t.isAdmin&&t.leaveRequest.status==="pending"?(o(),i("button",{key:0,class:"btn btn-success",onClick:u},e[6]||(e[6]=[s("i",{class:"bx bx-check me-1"},null,-1),d("Approve ")]))):n("",!0),t.isAdmin&&t.leaveRequest.status==="pending"?(o(),i("button",{key:1,class:"btn btn-danger",onClick:v},e[7]||(e[7]=[s("i",{class:"bx bx-x me-1"},null,-1),d("Reject ")]))):n("",!0)])]),s("div",Z,[s("div",$,[s("div",ss,[e[9]||(e[9]=s("div",{class:"card-header bg-primary text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-user me-2"}),d("Employee Information ")])],-1)),s("div",es,[s("div",ts,[s("div",as,[s("div",ds,[e[8]||(e[8]=s("div",{class:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"60px",height:"60px"}},[s("i",{class:"bx bx-user fs-4"})],-1)),s("div",null,[s("h6",ls,a((g=t.leaveRequest.user)==null?void 0:g.name),1),s("small",os,a((p=t.leaveRequest.user)==null?void 0:p.email),1)])])]),s("div",is,[s("div",ns,[s("span",{class:b([B(t.leaveRequest.status),"fs-6 px-3 py-2"])},a(E(t.leaveRequest.status)),3)])])])])]),s("div",cs,[e[17]||(e[17]=s("div",{class:"card-header bg-info text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-calendar me-2"}),d("Leave Request Details ")])],-1)),s("div",rs,[s("div",ms,[s("div",bs,[s("div",us,[e[10]||(e[10]=s("label",{class:"form-label fw-bold text-muted"},"Leave Type",-1)),s("div",vs,[s("span",xs,a(t.leaveRequest.leave_type_display),1)])])]),s("div",hs,[s("div",gs,[e[11]||(e[11]=s("label",{class:"form-label fw-bold text-muted"},"Days Requested",-1)),s("div",ps,[s("span",_s,a(t.leaveRequest.days_requested)+" days",1)])])])]),s("div",ys,[s("div",fs,[s("div",ws,[e[13]||(e[13]=s("label",{class:"form-label fw-bold text-muted"},"Start Date",-1)),s("div",Rs,[e[12]||(e[12]=s("i",{class:"bx bx-calendar me-2"},null,-1)),d(" "+a(x(t.leaveRequest.start_date)),1)])])]),s("div",qs,[s("div",ks,[e[15]||(e[15]=s("label",{class:"form-label fw-bold text-muted"},"End Date",-1)),s("div",As,[e[14]||(e[14]=s("i",{class:"bx bx-calendar me-2"},null,-1)),d(" "+a(x(t.leaveRequest.end_date)),1)])])])]),s("div",js,[e[16]||(e[16]=s("label",{class:"form-label fw-bold text-muted"},"Leave Details",-1)),s("div",Ds,[s("p",Ls,a(t.leaveRequest.details),1)])])])]),t.leaveRequest.admin_notes?(o(),i("div",Ss,[e[18]||(e[18]=s("div",{class:"card-header bg-warning text-dark"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-message-square-dots me-2"}),d("Admin Notes ")])],-1)),s("div",Cs,[s("div",Ms,[s("p",Bs,a(t.leaveRequest.admin_notes),1)])])])):n("",!0)]),s("div",Es,[s("div",Is,[e[21]||(e[21]=s("div",{class:"card-header bg-secondary text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-time me-2"}),d("Request Timeline ")])],-1)),s("div",Ns,[s("div",Vs,[s("div",Ts,[e[20]||(e[20]=s("div",{class:"timeline-marker bg-primary"},null,-1)),s("div",Ps,[e[19]||(e[19]=s("h6",{class:"mb-1"},"Request Submitted",-1)),s("small",Us,a(h(t.leaveRequest.created_at)),1)])]),t.leaveRequest.approved_at?(o(),i("div",zs,[s("div",{class:b(["timeline-marker",t.leaveRequest.status==="approved"?"bg-success":"bg-danger"])},null,2),s("div",Fs,[s("h6",Os,a(t.leaveRequest.status==="approved"?"Request Approved":"Request Rejected"),1),s("small",Qs,a(h(t.leaveRequest.approved_at)),1),t.leaveRequest.approved_by?(o(),i("div",Gs,[s("small",Hs,"by "+a((_=t.leaveRequest.approved_by)==null?void 0:_.name),1)])):n("",!0)])])):n("",!0)])])]),t.isAdmin&&t.leaveRequest.status==="pending"?(o(),i("div",Js,[e[24]||(e[24]=s("div",{class:"card-header bg-success text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-cog me-2"}),d("Quick Actions ")])],-1)),s("div",{class:"card-body"},[s("div",{class:"d-grid gap-2"},[s("button",{class:"btn btn-success",onClick:u},e[22]||(e[22]=[s("i",{class:"bx bx-check me-2"},null,-1),d("Approve Request ")])),s("button",{class:"btn btn-danger",onClick:v},e[23]||(e[23]=[s("i",{class:"bx bx-x me-2"},null,-1),d("Reject Request ")]))])])])):n("",!0),t.isAdmin?(o(),i("div",Ks,[e[28]||(e[28]=s("div",{class:"card-header bg-info text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-stats me-2"}),d("Employee Leave Stats ")])],-1)),s("div",Ws,[s("div",Xs,[s("div",Ys,[s("div",Zs,[s("h4",$s,a(((y=t.leaveRequest.user)==null?void 0:y.total_approved_requests)||0),1),e[25]||(e[25]=s("small",{class:"text-muted"},"Approved",-1))])]),s("div",se,[s("div",ee,[s("h4",te,a(((f=t.leaveRequest.user)==null?void 0:f.total_pending_requests)||0),1),e[26]||(e[26]=s("small",{class:"text-muted"},"Pending",-1))])]),s("div",ae,[s("div",null,[s("h4",de,a(((w=t.leaveRequest.user)==null?void 0:w.total_rejected_requests)||0),1),e[27]||(e[27]=s("small",{class:"text-muted"},"Rejected",-1))])])])])])):n("",!0),t.isAdmin?(o(),i("div",le,[e[35]||(e[35]=s("div",{class:"card-header bg-warning text-dark"},[s("h5",{class:"mb-0"},[s("i",{class:"bx bx-calendar-check me-2"}),d("Leave Credits Info ")])],-1)),s("div",oe,[s("div",ie,[s("div",ne,[s("div",ce,[e[29]||(e[29]=s("h6",{class:"text-muted mb-1"},"Emergency Leave",-1)),s("h4",re,a(((R=t.leaveRequest.user)==null?void 0:R.emergency_credits)||0),1),e[30]||(e[30]=s("small",{class:"text-muted"},"Available",-1))])]),s("div",me,[s("div",be,[e[31]||(e[31]=s("h6",{class:"text-muted mb-1"},"Sick Leave",-1)),s("h4",ue,a(((q=t.leaveRequest.user)==null?void 0:q.sick_credits)||0),1),e[32]||(e[32]=s("small",{class:"text-muted"},"Available",-1))])]),s("div",ve,[s("div",xe,[e[33]||(e[33]=s("h6",{class:"text-muted mb-1"},"Vacation Leave",-1)),s("h4",he,a(((k=t.leaveRequest.user)==null?void 0:k.vacation_credits)||0),1),e[34]||(e[34]=s("small",{class:"text-muted"},"Available",-1))])])])])])):n("",!0)])])])])]),s("div",ge,[s("div",pe,[s("div",_e,[s("div",ye,[s("h5",fe,a(c.value==="approve"?"Approve":"Reject")+" Leave Request",1),e[36]||(e[36]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),s("div",we,[s("form",{onSubmit:P(M,["prevent"])},[s("div",Re,[e[37]||(e[37]=s("label",{class:"form-label"},"Admin Notes",-1)),U(s("textarea",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=N=>r.value=N),rows:"3",placeholder:c.value==="approve"?"Add approval notes (optional)":"Add rejection reason (optional)"},null,8,qe),[[z,r.value]])]),s("div",ke,[e[38]||(e[38]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),s("button",{type:"submit",class:b(c.value==="approve"?"btn btn-success":"btn btn-danger")},a(c.value==="approve"?"Approve":"Reject"),3)])],32)])])])],512)]}),_:1}))}},Se=O(Ae,[["__scopeId","data-v-c17e8f96"]]);export{Se as default};
